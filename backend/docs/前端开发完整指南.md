# ğŸš€ å¯èˆªå¼•è·¯äºº - å‰ç«¯å¼€å‘å®Œæ•´æŒ‡å—

## ğŸ“š ç›®å½•å¯¼èˆª

- [ğŸ“– é¡¹ç›®æ¦‚è¿°](#-é¡¹ç›®æ¦‚è¿°)
- [ğŸŒ åç«¯ API æ¶æ„](#-åç«¯-api-æ¶æ„)
- [ğŸ“‹ å®Œæ•´ API ç«¯ç‚¹æ˜ å°„](#-å®Œæ•´-api-ç«¯ç‚¹æ˜ å°„)
  - [ğŸ” è®¤è¯ç³»ç»Ÿ](#-è®¤è¯ç³»ç»Ÿ-apiv1auth)
  - [ğŸ‘¤ ç”¨æˆ·ç®¡ç†](#-ç”¨æˆ·ç®¡ç†-apiv1users)
  - [ğŸ“ å­¦é•¿å­¦å§ï¼ˆå¯¼å¸ˆï¼‰æ¨¡å—](#-å­¦é•¿å­¦å§å¯¼å¸ˆæ¨¡å—-apiv1mentors)
  - [ğŸ“š å­¦å¼Ÿå­¦å¦¹ï¼ˆå­¦ç”Ÿï¼‰æ¨¡å—](#-å­¦å¼Ÿå­¦å¦¹å­¦ç”Ÿæ¨¡å—-apiv1students)
  - [ğŸ›ï¸ æœåŠ¡äº¤æ˜“æ¨¡å—](#ï¸-æœåŠ¡äº¤æ˜“æ¨¡å—-apiv1services)
  - [ğŸ¯ æ™ºèƒ½åŒ¹é…ç³»ç»Ÿ](#-æ™ºèƒ½åŒ¹é…ç³»ç»Ÿ-apiv1matching)
  - [ğŸ’¬ æ¶ˆæ¯ç³»ç»Ÿ](#-æ¶ˆæ¯ç³»ç»Ÿ-apiv1messages)
  - [â­ è¯„ä»·ç³»ç»Ÿ](#-è¯„ä»·ç³»ç»Ÿ-apiv1reviews)
  - [ğŸ“… ä¼šè¯ç®¡ç†](#-ä¼šè¯ç®¡ç†-apiv1sessions)
- [ğŸ’» å‰ç«¯æŠ€æœ¯æ ˆå»ºè®®](#-å‰ç«¯æŠ€æœ¯æ ˆå»ºè®®)
- [ğŸ”‘ è®¤è¯ç³»ç»Ÿé›†æˆ](#-è®¤è¯ç³»ç»Ÿé›†æˆ)
- [ğŸ‘¥ ç”¨æˆ·æ¨¡å—å®ç°](#-ç”¨æˆ·æ¨¡å—å®ç°)
- [ğŸ¨ é¡µé¢ç»„ä»¶å®ç°ç¤ºä¾‹](#-é¡µé¢ç»„ä»¶å®ç°ç¤ºä¾‹)
- [ğŸ“± æ ¸å¿ƒåŠŸèƒ½å®ç°æŒ‡å—](#-æ ¸å¿ƒåŠŸèƒ½å®ç°æŒ‡å—)
- [ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜åŒ–å»ºè®®](#-ç”¨æˆ·ä½“éªŒä¼˜åŒ–å»ºè®®)
- [ğŸš€ éƒ¨ç½²å’Œå¼€å‘ç¯å¢ƒé…ç½®](#-éƒ¨ç½²å’Œå¼€å‘ç¯å¢ƒé…ç½®)
- [ğŸ”§ å¼€å‘è°ƒè¯•å·¥å…·](#-å¼€å‘è°ƒè¯•å·¥å…·)
- [ğŸ“š æœ€ä½³å®è·µæŒ‡å—](#-æœ€ä½³å®è·µæŒ‡å—)
- [ğŸ¯ åŠŸèƒ½å¼€å‘ä¼˜å…ˆçº§](#-åŠŸèƒ½å¼€å‘ä¼˜å…ˆçº§)
- [ğŸ¤ å‰åç«¯åä½œå»ºè®®](#-å‰åç«¯åä½œå»ºè®®)
- [ğŸ“ æŠ€æœ¯æ”¯æŒ](#-æŠ€æœ¯æ”¯æŒ)

---

## ğŸ“– é¡¹ç›®æ¦‚è¿°

**å¯èˆªå¼•è·¯äºº**æ˜¯ä¸€ä¸ªè¿æ¥ç•™å­¦ç”³è¯·è€…ä¸ç›®æ ‡å­¦æ ¡å­¦é•¿å­¦å§çš„ä¸“ä¸šæŒ‡å¯¼å¹³å°ã€‚å‰ç«¯éœ€è¦æ„å»ºä¸€ä¸ªç›´è§‚ã€å‹å¥½çš„ç”¨æˆ·ç•Œé¢ï¼Œæ”¯æŒåŒè¾¹ç”¨æˆ·ï¼ˆå­¦å¼Ÿå­¦å¦¹ + å­¦é•¿å­¦å§ï¼‰çš„å®Œæ•´äº¤äº’æµç¨‹ã€‚

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
1. **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** - æ³¨å†Œã€ç™»å½•ã€è§’è‰²ç®¡ç†
2. **å­¦é•¿å­¦å§ï¼ˆå¯¼å¸ˆï¼‰æ¨¡å—** - èµ„æ–™ç®¡ç†ã€æœåŠ¡å‘å¸ƒ
3. **å­¦å¼Ÿå­¦å¦¹ï¼ˆå­¦ç”Ÿï¼‰æ¨¡å—** - éœ€æ±‚å‘å¸ƒã€å¯¼å¸ˆåŒ¹é…
4. **æœåŠ¡äº¤æ˜“æ¨¡å—** - æœåŠ¡æµè§ˆã€ä¸‹å•ã€æ”¯ä»˜
5. **æ™ºèƒ½åŒ¹é…ç³»ç»Ÿ** - åŸºäºéœ€æ±‚çš„è‡ªåŠ¨åŒ¹é…
6. **æ¶ˆæ¯é€šè®¯ç³»ç»Ÿ** - å®æ—¶èŠå¤©ã€ä¼šè¯ç®¡ç†
7. **è¯„ä»·åé¦ˆç³»ç»Ÿ** - æœåŠ¡è¯„ä»·ã€ä¿¡èª‰ç§¯ç´¯

## ğŸŒ åç«¯ API æ¶æ„

### ğŸš€ æœåŠ¡é…ç½®
- **å¼€å‘ç¯å¢ƒ**: `http://localhost:8001`
- **ç”Ÿäº§ç¯å¢ƒ**: `https://api.peerpotal.com` (å¾…éƒ¨ç½²)
- **APIæ–‡æ¡£**: `http://localhost:8001/docs` (Swagger UI)
- **è®¤è¯æ–¹å¼**: JWT Bearer Token
- **å“åº”æ ¼å¼**: JSON
- **CORSæ”¯æŒ**: å·²é…ç½®æ”¯æŒ `http://localhost:3000`

### ğŸ”‘ è®¤è¯æµç¨‹

#### JWT Token ä½¿ç”¨è¯´æ˜
```javascript
// 1. ç™»å½•åè·å– access_token
const loginResponse = await fetch('/api/v1/auth/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ username, password })
});

// 2. åœ¨åç»­è¯·æ±‚ä¸­ä½¿ç”¨ Bearer Token
const headers = {
  'Authorization': `Bearer ${accessToken}`,
  'Content-Type': 'application/json'
};
```

## ğŸ“‹ å®Œæ•´ API ç«¯ç‚¹æ˜ å°„

### ğŸ” è®¤è¯ç³»ç»Ÿ (`/api/v1/auth`)
```javascript
// ç”¨æˆ·æ³¨å†Œ
POST /api/v1/auth/register
Body: {
  "username": "string",
  "email": "user@example.com", 
  "password": "string",
  "role": "student" | "mentor" | "user"
}

// ç”¨æˆ·ç™»å½•  
POST /api/v1/auth/login
Body: {
  "username": "string",
  "password": "string"
}
Response: {
  "access_token": "string",
  "token_type": "bearer",
  "user": { id, username, email, role }
}

// Token åˆ·æ–°
POST /api/v1/auth/refresh
Headers: { "Authorization": "Bearer <token>" }
```

### ğŸ‘¤ ç”¨æˆ·ç®¡ç† (`/api/v1/users`)
```javascript
// è·å–å½“å‰ç”¨æˆ·å®Œæ•´ä¿¡æ¯
GET /api/v1/users/me
Headers: { "Authorization": "Bearer <token>" }

// æ›´æ–°å½“å‰ç”¨æˆ·èµ„æ–™
PUT /api/v1/users/me  
Body: {
  "username": "string",
  "email": "user@example.com"
}

// è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
GET /api/v1/users/me/basic

// è·å–æŒ‡å®šç”¨æˆ·å…¬å¼€èµ„æ–™
GET /api/v1/users/{user_id}/profile
```

### ğŸ“ å­¦é•¿å­¦å§ï¼ˆå¯¼å¸ˆï¼‰æ¨¡å— (`/api/v1/mentors`)
```javascript
// åˆ›å»ºå¯¼å¸ˆèµ„æ–™
POST /api/v1/mentors/
Body: {
  "title": "ç•™å­¦ç”³è¯·æŒ‡å¯¼",
  "description": "æä¾›ä¸“ä¸šçš„ç•™å­¦ç”³è¯·æŒ‡å¯¼æœåŠ¡",
  "learning_goals": "å¸®åŠ©å­¦å¼Ÿå­¦å¦¹æˆåŠŸç”³è¯·ç†æƒ³å­¦æ ¡",
  "hourly_rate": 200.0,
  "session_duration_minutes": 60
}

// è·å–å½“å‰ç”¨æˆ·çš„å¯¼å¸ˆèµ„æ–™
GET /api/v1/mentors/me

// æ›´æ–°å¯¼å¸ˆèµ„æ–™
PUT /api/v1/mentors/{mentor_id}

// åˆ é™¤å¯¼å¸ˆèµ„æ–™  
DELETE /api/v1/mentors/{mentor_id}

// è·å–å¯¼å¸ˆèµ„æ–™è¯¦æƒ…
GET /api/v1/mentors/{mentor_id}

// æœç´¢å¯¼å¸ˆåˆ—è¡¨
GET /api/v1/mentors/search
Query: ?title=å…³é”®è¯&hourly_rate_min=100&hourly_rate_max=500
```

### ğŸ“š å­¦å¼Ÿå­¦å¦¹ï¼ˆå­¦ç”Ÿï¼‰æ¨¡å— (`/api/v1/students`)
```javascript
// åˆ›å»ºå­¦ç”Ÿèµ„æ–™/å­¦ä¹ éœ€æ±‚
POST /api/v1/students/
Body: {
  "urgency_level": 3,
  "budget_min": 100.0,
  "budget_max": 300.0, 
  "description": "å¸Œæœ›æ‰¾åˆ°ç»éªŒä¸°å¯Œçš„å­¦é•¿å­¦å§æŒ‡å¯¼æˆ‘çš„ç•™å­¦ç”³è¯·",
  "learning_goals": "æˆåŠŸç”³è¯·åˆ°å¿ƒä»ªçš„ç ”ç©¶ç”Ÿé¡¹ç›®",
  "preferred_format": "online"
}

// è·å–å½“å‰ç”¨æˆ·çš„å­¦ç”Ÿèµ„æ–™
GET /api/v1/students/me

// æ›´æ–°å­¦ç”Ÿèµ„æ–™
PUT /api/v1/students/{student_id}

// åˆ é™¤å­¦ç”Ÿèµ„æ–™
DELETE /api/v1/students/{student_id}

// è·å–å­¦ç”Ÿèµ„æ–™è¯¦æƒ…
GET /api/v1/students/{student_id}

// æœç´¢å­¦ä¹ éœ€æ±‚
GET /api/v1/students/search
```

### ğŸ›ï¸ æœåŠ¡äº¤æ˜“æ¨¡å— (`/api/v1/services`)
```javascript
// åˆ›å»ºæœåŠ¡ï¼ˆå¯¼å¸ˆå‘å¸ƒï¼‰
POST /api/v1/services/
Body: {
  "title": "ä¸€å¯¹ä¸€ç•™å­¦ç”³è¯·æŒ‡å¯¼",
  "description": "æä¾›ä¸ªæ€§åŒ–çš„ç•™å­¦ç”³è¯·å…¨æµç¨‹æŒ‡å¯¼æœåŠ¡",
  "category": "ç•™å­¦æŒ‡å¯¼",
  "price": 299,  // æ³¨æ„ï¼šä»·æ ¼ä¸ºæ•´æ•°ï¼ˆåˆ†ï¼‰
  "duration_hours": 2
}

// è·å–å½“å‰ç”¨æˆ·å‘å¸ƒçš„æœåŠ¡
GET /api/v1/services/me

// æ›´æ–°æœåŠ¡
PUT /api/v1/services/{service_id}

// åˆ é™¤æœåŠ¡
DELETE /api/v1/services/{service_id}

// è·å–æœåŠ¡è¯¦æƒ…
GET /api/v1/services/{service_id}

// æœç´¢æœåŠ¡åˆ—è¡¨
GET /api/v1/services/search
Query: ?category=ç•™å­¦æŒ‡å¯¼&price_min=100&price_max=500
```

### ğŸ¯ æ™ºèƒ½åŒ¹é…ç³»ç»Ÿ (`/api/v1/matching`)
```javascript
// è·å–æ¨èå¯¼å¸ˆï¼ˆåŸºäºå­¦ç”Ÿéœ€æ±‚ï¼‰
GET /api/v1/matching/recommended-mentors
Headers: { "Authorization": "Bearer <token>" }

// è·å–æ¨èå­¦ç”Ÿï¼ˆåŸºäºå¯¼å¸ˆæœåŠ¡ï¼‰
GET /api/v1/matching/recommended-students

// åˆ›å»ºåŒ¹é…è¯·æ±‚
POST /api/v1/matching/requests
Body: {
  "target_user_id": 123,
  "message": "å¸Œæœ›èƒ½å¾—åˆ°æ‚¨çš„æŒ‡å¯¼"
}
```

### ğŸ’¬ æ¶ˆæ¯ç³»ç»Ÿ (`/api/v1/messages`)
```javascript
// å‘é€æ¶ˆæ¯
POST /api/v1/messages/
Body: {
  "receiver_id": 123,
  "content": "æ‚¨å¥½ï¼Œæˆ‘å¯¹æ‚¨çš„ç•™å­¦æŒ‡å¯¼æœåŠ¡å¾ˆæ„Ÿå…´è¶£"
}

// è·å–å¯¹è¯åˆ—è¡¨
GET /api/v1/messages/conversations

// è·å–ä¸ç‰¹å®šç”¨æˆ·çš„èŠå¤©è®°å½•
GET /api/v1/messages/conversation/{user_id}

// æ ‡è®°æ¶ˆæ¯ä¸ºå·²è¯»
PUT /api/v1/messages/{message_id}/read
```

### â­ è¯„ä»·ç³»ç»Ÿ (`/api/v1/reviews`)
```javascript
// åˆ›å»ºè¯„ä»·
POST /api/v1/reviews/
Body: {
  "service_id": 123,
  "rating": 5,
  "comment": "éå¸¸ä¸“ä¸šçš„æŒ‡å¯¼ï¼Œå¸®åŠ©å¾ˆå¤§ï¼"
}

// è·å–æœåŠ¡çš„è¯„ä»·åˆ—è¡¨
GET /api/v1/reviews/service/{service_id}

// è·å–ç”¨æˆ·æ”¶åˆ°çš„è¯„ä»·
GET /api/v1/reviews/user/{user_id}
```

### ğŸ“… ä¼šè¯ç®¡ç† (`/api/v1/sessions`)
```javascript
// åˆ›å»ºæŒ‡å¯¼ä¼šè¯
POST /api/v1/sessions/
Body: {
  "mentor_id": 123,
  "scheduled_time": "2024-01-15T10:00:00Z",
  "duration_minutes": 60,
  "topic": "ç•™å­¦ç”³è¯·æ–‡ä¹¦æŒ‡å¯¼"
}

// è·å–æˆ‘çš„ä¼šè¯åˆ—è¡¨
GET /api/v1/sessions/me

// æ›´æ–°ä¼šè¯çŠ¶æ€
PUT /api/v1/sessions/{session_id}
Body: {
  "status": "completed",
  "notes": "æœ¬æ¬¡ä¼šè¯è®¨è®ºäº†ä¸ªäººé™ˆè¿°çš„å†™ä½œè¦ç‚¹"
}
```

## ğŸ’» å‰ç«¯æŠ€æœ¯æ ˆå»ºè®®

### ğŸ¨ æ¨èæŠ€æœ¯æ ˆ
- **æ¡†æ¶**: React 18+ / Next.js 13+ æˆ– Vue 3+ / Nuxt 3+
- **çŠ¶æ€ç®¡ç†**: Zustand / Pinia / Redux Toolkit  
- **UIç»„ä»¶åº“**: Ant Design / Element Plus / Chakra UI
- **ç±»å‹æ£€æŸ¥**: TypeScript
- **HTTPå®¢æˆ·ç«¯**: Axios / Fetch API
- **è·¯ç”±**: React Router / Next.js Router / Vue Router
- **æ ·å¼**: Tailwind CSS / CSS Modules
- **æ„å»ºå·¥å…·**: Vite / Next.js

### ğŸ“ æ¨èé¡¹ç›®ç»“æ„ (React/Next.js)
```
src/
â”œâ”€â”€ components/            # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/               # åŸºç¡€UIç»„ä»¶
â”‚   â”œâ”€â”€ forms/            # è¡¨å•ç»„ä»¶
â”‚   â””â”€â”€ layouts/          # å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ pages/                # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ auth/             # è®¤è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ login.tsx
â”‚   â”‚   â””â”€â”€ register.tsx
â”‚   â”œâ”€â”€ dashboard/        # æ§åˆ¶å°é¡µé¢
â”‚   â”œâ”€â”€ mentors/          # å¯¼å¸ˆç›¸å…³é¡µé¢
â”‚   â”œâ”€â”€ students/         # å­¦ç”Ÿç›¸å…³é¡µé¢
â”‚   â”œâ”€â”€ services/         # æœåŠ¡ç›¸å…³é¡µé¢
â”‚   â””â”€â”€ messages/         # æ¶ˆæ¯é¡µé¢
â”œâ”€â”€ hooks/                # è‡ªå®šä¹‰hooks
â”‚   â”œâ”€â”€ useAuth.ts        # è®¤è¯hooks
â”‚   â”œâ”€â”€ useApi.ts         # APIè°ƒç”¨hooks
â”‚   â””â”€â”€ useSocket.ts      # WebSocket hooks
â”œâ”€â”€ lib/                  # å·¥å…·åº“
â”‚   â”œâ”€â”€ api/              # APIå°è£…
â”‚   â”‚   â”œâ”€â”€ client.ts     # HTTPå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ auth.ts       # è®¤è¯API
â”‚   â”‚   â”œâ”€â”€ users.ts      # ç”¨æˆ·API
â”‚   â”‚   â”œâ”€â”€ mentors.ts    # å¯¼å¸ˆAPI
â”‚   â”‚   â”œâ”€â”€ students.ts   # å­¦ç”ŸAPI
â”‚   â”‚   â””â”€â”€ services.ts   # æœåŠ¡API
â”‚   â”œâ”€â”€ store/            # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ auth.ts       # è®¤è¯çŠ¶æ€
â”‚   â”‚   â””â”€â”€ types.ts      # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ storage.ts    # æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â””â”€â”€ validators.ts # è¡¨å•éªŒè¯
â”‚   â””â”€â”€ constants.ts      # å¸¸é‡é…ç½®
â”œâ”€â”€ types/                # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ user.ts
â”‚   â””â”€â”€ api.ts
â””â”€â”€ middleware.ts         # Next.jsä¸­é—´ä»¶ï¼ˆè·¯ç”±ä¿æŠ¤ï¼‰
```

## ğŸ”‘ è®¤è¯ç³»ç»Ÿé›†æˆ

### 1. API å®¢æˆ·ç«¯é…ç½®

```typescript
// lib/api/client.ts
import axios from 'axios';

const API_BASE_URL = 'http://localhost:8001';

// åˆ›å»ºaxioså®ä¾‹
export const apiClient = axios.create({
  baseURL: API_BASE_URL,
  headers: {
    'Content-Type': 'application/json',
  },
});

// è¯·æ±‚æ‹¦æˆªå™¨ - è‡ªåŠ¨æ·»åŠ Token
apiClient.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('access_token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

// å“åº”æ‹¦æˆªå™¨ - å¤„ç†Tokenè¿‡æœŸ
apiClient.interceptors.response.use(
  (response) => response,
  async (error) => {
    if (error.response?.status === 401) {
      // Tokenè¿‡æœŸï¼Œå°è¯•åˆ·æ–°
      try {
        await refreshToken();
        // é‡è¯•åŸè¯·æ±‚
        return apiClient.request(error.config);
      } catch (refreshError) {
        // åˆ·æ–°å¤±è´¥ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
        localStorage.removeItem('access_token');
        window.location.href = '/login';
      }
    }
    return Promise.reject(error);
  }
);

// Tokenåˆ·æ–°å‡½æ•°
async function refreshToken() {
  const token = localStorage.getItem('access_token');
  if (!token) throw new Error('No token available');
  
  const response = await axios.post(`${API_BASE_URL}/api/v1/auth/refresh`, {}, {
    headers: { Authorization: `Bearer ${token}` }
  });
  
  localStorage.setItem('access_token', response.data.access_token);
  return response.data.access_token;
}
```

### 2. è®¤è¯ API å°è£…

```typescript
// lib/api/auth.ts
import { apiClient } from './client';

export interface LoginRequest {
  username: string;
  password: string;
}

export interface RegisterRequest {
  username: string;
  email?: string;
  password: string;
  role?: 'student' | 'mentor' | 'user';
}

export interface AuthResponse {
  access_token: string;
  token_type: string;
  user: User;
}

export interface User {
  id: number;
  username: string;
  email?: string;
  role: string;
  is_active: boolean;
  created_at: string;
}

// ç”¨æˆ·æ³¨å†Œ
export const register = async (data: RegisterRequest): Promise<AuthResponse> => {
  const response = await apiClient.post('/api/v1/auth/register', data);
  return response.data;
};

// ç”¨æˆ·ç™»å½•
export const login = async (data: LoginRequest): Promise<AuthResponse> => {
  const response = await apiClient.post('/api/v1/auth/login', data);
  // ä¿å­˜tokenåˆ°æœ¬åœ°å­˜å‚¨
  localStorage.setItem('access_token', response.data.access_token);
  return response.data;
};

// è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
export const getCurrentUser = async (): Promise<User> => {
  const response = await apiClient.get('/api/v1/users/me');
  return response.data;
};

// é€€å‡ºç™»å½•
export const logout = async (): Promise<void> => {
  localStorage.removeItem('access_token');
  window.location.href = '/login';
};
```

### 3. è®¤è¯ Hook (React)

```typescript
// hooks/useAuth.ts
import { useState, useEffect, createContext, useContext } from 'react';
import * as authApi from '../lib/api/auth';

interface AuthContextType {
  user: User | null;
  isLoading: boolean;
  isAuthenticated: boolean;
  login: (username: string, password: string) => Promise<void>;
  register: (data: RegisterRequest) => Promise<void>;
  logout: () => void;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    checkAuthStatus();
  }, []);

  const checkAuthStatus = async () => {
    try {
      const token = localStorage.getItem('access_token');
      if (token) {
        const userData = await authApi.getCurrentUser();
        setUser(userData);
      }
    } catch (error) {
      localStorage.removeItem('access_token');
    } finally {
      setIsLoading(false);
    }
  };

  const login = async (username: string, password: string) => {
    const response = await authApi.login({ username, password });
    setUser(response.user);
  };

  const register = async (data: RegisterRequest) => {
    const response = await authApi.register(data);
    setUser(response.user);
  };

  const logout = () => {
    authApi.logout();
    setUser(null);
  };

  return (
    <AuthContext.Provider value={{
      user,
      isLoading,
      isAuthenticated: !!user,
      login,
      register,
      logout
    }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
```

## ğŸ‘¥ ç”¨æˆ·æ¨¡å—å®ç°

### 1. å¯¼å¸ˆï¼ˆMentorï¼‰API å°è£…

```typescript
// lib/api/mentors.ts
import { apiClient } from './client';

export interface MentorProfile {
  id: number;
  mentor_id: number;
  title: string;
  description?: string;
  learning_goals?: string;
  hourly_rate?: number;
  session_duration_minutes: number;
  rating?: number;
  sessions_completed: number;
  status: string;
  created_at: string;
}

export interface CreateMentorRequest {
  title: string;
  description?: string;
  learning_goals?: string;
  hourly_rate?: number;
  session_duration_minutes?: number;
}

// åˆ›å»ºå¯¼å¸ˆèµ„æ–™
export const createMentorProfile = async (data: CreateMentorRequest): Promise<MentorProfile> => {
  const response = await apiClient.post('/api/v1/mentors/', data);
  return response.data;
};

// è·å–æˆ‘çš„å¯¼å¸ˆèµ„æ–™
export const getMyMentorProfile = async (): Promise<MentorProfile> => {
  const response = await apiClient.get('/api/v1/mentors/me');
  return response.data;
};

// æœç´¢å¯¼å¸ˆåˆ—è¡¨
export const searchMentors = async (params: {
  title?: string;
  hourly_rate_min?: number;
  hourly_rate_max?: number;
  page?: number;
  limit?: number;
}): Promise<{ mentors: MentorProfile[]; total: number }> => {
  const response = await apiClient.get('/api/v1/mentors/search', { params });
  return response.data;
};

// è·å–å¯¼å¸ˆè¯¦æƒ…
export const getMentorProfile = async (mentorId: number): Promise<MentorProfile> => {
  const response = await apiClient.get(`/api/v1/mentors/${mentorId}`);
  return response.data;
};
```

### 2. å­¦ç”Ÿï¼ˆStudentï¼‰API å°è£…

```typescript
// lib/api/students.ts
import { apiClient } from './client';

export interface StudentProfile {
  id: number;
  user_id: number;
  urgency_level: number;
  budget_min?: number;
  budget_max?: number;
  description: string;
  learning_goals: string;
  preferred_format: string;
  current_level: number;
  target_level: number;
  created_at: string;
}

export interface CreateStudentRequest {
  urgency_level: number;
  budget_min?: number;
  budget_max?: number;
  description: string;
  learning_goals: string;
  preferred_format?: string;
}

// åˆ›å»ºå­¦ç”Ÿèµ„æ–™
export const createStudentProfile = async (data: CreateStudentRequest): Promise<StudentProfile> => {
  const response = await apiClient.post('/api/v1/students/', data);
  return response.data;
};

// è·å–æˆ‘çš„å­¦ç”Ÿèµ„æ–™
export const getMyStudentProfile = async (): Promise<StudentProfile> => {
  const response = await apiClient.get('/api/v1/students/me');
  return response.data;
};

// æœç´¢å­¦ä¹ éœ€æ±‚
export const searchStudents = async (params: {
  urgency_level?: number;
  budget_min?: number;
  budget_max?: number;
  page?: number;
  limit?: number;
}): Promise<{ students: StudentProfile[]; total: number }> => {
  const response = await apiClient.get('/api/v1/students/search', { params });
  return response.data;
};
```

### 3. æœåŠ¡ï¼ˆServiceï¼‰API å°è£…

```typescript
// lib/api/services.ts
import { apiClient } from './client';

export interface Service {
  id: number;
  navigator_id: number;
  title: string;
  description: string;
  category: string;
  price: number; // ä»·æ ¼ä¸ºæ•´æ•°ï¼ˆåˆ†ï¼‰
  duration_hours: number;
  rating?: number;
  total_orders: number;
  is_active: boolean;
  created_at: string;
}

export interface CreateServiceRequest {
  title: string;
  description: string;
  category: string;
  price: number;
  duration_hours: number;
}

// åˆ›å»ºæœåŠ¡
export const createService = async (data: CreateServiceRequest): Promise<Service> => {
  const response = await apiClient.post('/api/v1/services/', data);
  return response.data;
};

// è·å–æˆ‘å‘å¸ƒçš„æœåŠ¡
export const getMyServices = async (): Promise<Service[]> => {
  const response = await apiClient.get('/api/v1/services/me');
  return response.data;
};

// æœç´¢æœåŠ¡
export const searchServices = async (params: {
  category?: string;
  price_min?: number;
  price_max?: number;
  page?: number;
  limit?: number;
}): Promise<{ services: Service[]; total: number }> => {
  const response = await apiClient.get('/api/v1/services/search', { params });
  return response.data;
};

// è·å–æœåŠ¡è¯¦æƒ…
export const getService = async (serviceId: number): Promise<Service> => {
  const response = await apiClient.get(`/api/v1/services/${serviceId}`);
  return response.data;
};
```

## ğŸ¨ é¡µé¢ç»„ä»¶å®ç°ç¤ºä¾‹

### 1. ç™»å½•é¡µé¢ç»„ä»¶

```tsx
// pages/auth/Login.tsx
import React, { useState } from 'react';
import { useAuth } from '../../hooks/useAuth';
import { Button, Input, Form, message } from 'antd';

const Login: React.FC = () => {
  const { login } = useAuth();
  const [loading, setLoading] = useState(false);

  const onFinish = async (values: { username: string; password: string }) => {
    setLoading(true);
    try {
      await login(values.username, values.password);
      message.success('ç™»å½•æˆåŠŸï¼');
      // ç™»å½•æˆåŠŸåè·³è½¬åˆ°æ§åˆ¶å°
      window.location.href = '/dashboard';
    } catch (error: any) {
      message.error(error.response?.data?.detail || 'ç™»å½•å¤±è´¥');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-gray-50">
      <div className="max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow">
        <div className="text-center">
          <h2 className="text-3xl font-bold text-gray-900">ç™»å½•å¯èˆªå¼•è·¯äºº</h2>
          <p className="mt-2 text-gray-600">è¿æ¥ç•™å­¦ç”³è¯·è€…ä¸å­¦é•¿å­¦å§</p>
        </div>
        
        <Form onFinish={onFinish} layout="vertical">
          <Form.Item
            label="ç”¨æˆ·å"
            name="username"
            rules={[{ required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å' }]}
          >
            <Input placeholder="è¯·è¾“å…¥ç”¨æˆ·å" />
          </Form.Item>
          
          <Form.Item
            label="å¯†ç "
            name="password"
            rules={[{ required: true, message: 'è¯·è¾“å…¥å¯†ç ' }]}
          >
            <Input.Password placeholder="è¯·è¾“å…¥å¯†ç " />
          </Form.Item>
          
          <Form.Item>
            <Button type="primary" htmlType="submit" loading={loading} block>
              ç™»å½•
            </Button>
          </Form.Item>
        </Form>
        
        <div className="text-center">
          <a href="/auth/register" className="text-blue-600 hover:text-blue-500">
            è¿˜æ²¡æœ‰è´¦å·ï¼Ÿç«‹å³æ³¨å†Œ
          </a>
        </div>
      </div>
    </div>
  );
};

export default Login;
```

### 2. å¯¼å¸ˆèµ„æ–™åˆ›å»ºé¡µé¢

```tsx
// pages/mentors/CreateProfile.tsx
import React, { useState } from 'react';
import { Form, Input, InputNumber, Button, message } from 'antd';
import { createMentorProfile } from '../../lib/api/mentors';
import { useNavigate } from 'react-router-dom';

const CreateMentorProfile: React.FC = () => {
  const [loading, setLoading] = useState(false);
  const navigate = useNavigate();

  const onFinish = async (values: any) => {
    setLoading(true);
    try {
      await createMentorProfile(values);
      message.success('å¯¼å¸ˆèµ„æ–™åˆ›å»ºæˆåŠŸï¼');
      navigate('/dashboard/mentor');
    } catch (error: any) {
      message.error(error.response?.data?.detail || 'åˆ›å»ºå¤±è´¥');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="max-w-2xl mx-auto p-6">
      <h1 className="text-2xl font-bold mb-6">åˆ›å»ºå¯¼å¸ˆèµ„æ–™</h1>
      
      <Form onFinish={onFinish} layout="vertical">
        <Form.Item
          label="æŒ‡å¯¼æ ‡é¢˜"
          name="title"
          rules={[{ required: true, message: 'è¯·è¾“å…¥æŒ‡å¯¼æ ‡é¢˜' }]}
        >
          <Input placeholder="ä¾‹å¦‚ï¼šç¾å›½ç ”ç©¶ç”Ÿç”³è¯·æŒ‡å¯¼" />
        </Form.Item>
        
        <Form.Item
          label="æœåŠ¡æè¿°"
          name="description"
        >
          <Input.TextArea 
            rows={4} 
            placeholder="è¯¦ç»†æè¿°æ‚¨èƒ½æä¾›çš„æŒ‡å¯¼æœåŠ¡..." 
          />
        </Form.Item>
        
        <Form.Item
          label="å­¦ä¹ ç›®æ ‡"
          name="learning_goals"
        >
          <Input.TextArea 
            rows={3} 
            placeholder="å¸Œæœ›å¸®åŠ©å­¦å¼Ÿå­¦å¦¹è¾¾æˆä»€ä¹ˆç›®æ ‡..." 
          />
        </Form.Item>
        
        <Form.Item
          label="æ—¶è–ª (CNY)"
          name="hourly_rate"
        >
          <InputNumber min={0} style={{ width: '100%' }} placeholder="è®¾ç½®æ‚¨çš„æ—¶è–ª" />
        </Form.Item>
        
        <Form.Item
          label="å•æ¬¡ä¼šè¯æ—¶é•¿ (åˆ†é’Ÿ)"
          name="session_duration_minutes"
          initialValue={60}
        >
          <InputNumber min={30} max={180} style={{ width: '100%' }} />
        </Form.Item>
        
        <Form.Item>
          <Button type="primary" htmlType="submit" loading={loading} block>
            åˆ›å»ºå¯¼å¸ˆèµ„æ–™
          </Button>
        </Form.Item>
      </Form>
    </div>
  );
};

export default CreateMentorProfile;
```

### 3. æœåŠ¡æœç´¢é¡µé¢

```tsx
// pages/services/Search.tsx
import React, { useState, useEffect } from 'react';
import { Card, Input, Select, Row, Col, Button, Pagination } from 'antd';
import { SearchOutlined, UserOutlined } from '@ant-design/icons';
import { searchServices, Service } from '../../lib/api/services';

const ServiceSearch: React.FC = () => {
  const [services, setServices] = useState<Service[]>([]);
  const [loading, setLoading] = useState(false);
  const [filters, setFilters] = useState({
    category: '',
    price_min: undefined,
    price_max: undefined,
    page: 1,
    limit: 12
  });
  const [total, setTotal] = useState(0);

  useEffect(() => {
    loadServices();
  }, [filters]);

  const loadServices = async () => {
    setLoading(true);
    try {
      const response = await searchServices(filters);
      setServices(response.services);
      setTotal(response.total);
    } catch (error) {
      console.error('åŠ è½½æœåŠ¡å¤±è´¥:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleFilterChange = (key: string, value: any) => {
    setFilters(prev => ({ ...prev, [key]: value, page: 1 }));
  };

  const formatPrice = (price: number) => {
    return `Â¥${(price / 100).toFixed(2)}`;
  };

  return (
    <div className="container mx-auto p-6">
      <h1 className="text-3xl font-bold mb-6">å¯»æ‰¾åˆé€‚çš„æŒ‡å¯¼æœåŠ¡</h1>
      
      {/* æœç´¢ç­›é€‰å™¨ */}
      <div className="bg-white p-4 rounded-lg shadow mb-6">
        <Row gutter={16}>
          <Col span={8}>
            <Select
              placeholder="é€‰æ‹©æœåŠ¡åˆ†ç±»"
              style={{ width: '100%' }}
              allowClear
              onChange={(value) => handleFilterChange('category', value)}
            >
              <Select.Option value="ç•™å­¦ç”³è¯·">ç•™å­¦ç”³è¯·</Select.Option>
              <Select.Option value="è¯­è¨€åŸ¹è®­">è¯­è¨€åŸ¹è®­</Select.Option>
              <Select.Option value="æ–‡ä¹¦ä¿®æ”¹">æ–‡ä¹¦ä¿®æ”¹</Select.Option>
              <Select.Option value="é¢è¯•æŒ‡å¯¼">é¢è¯•æŒ‡å¯¼</Select.Option>
            </Select>
          </Col>
          <Col span={6}>
            <Input
              placeholder="æœ€ä½ä»·æ ¼"
              type="number"
              onChange={(e) => handleFilterChange('price_min', e.target.value ? parseInt(e.target.value) * 100 : undefined)}
            />
          </Col>
          <Col span={6}>
            <Input
              placeholder="æœ€é«˜ä»·æ ¼"
              type="number"
              onChange={(e) => handleFilterChange('price_max', e.target.value ? parseInt(e.target.value) * 100 : undefined)}
            />
          </Col>
          <Col span={4}>
            <Button type="primary" icon={<SearchOutlined />} onClick={loadServices}>
              æœç´¢
            </Button>
          </Col>
        </Row>
      </div>

      {/* æœåŠ¡åˆ—è¡¨ */}
      <Row gutter={[16, 16]}>
        {services.map((service) => (
          <Col key={service.id} xs={24} sm={12} lg={8}>
            <Card
              hoverable
              cover={
                <div className="h-48 bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center">
                  <UserOutlined className="text-6xl text-white" />
                </div>
              }
              actions={[
                <Button type="primary" onClick={() => window.location.href = `/services/${service.id}`}>
                  æŸ¥çœ‹è¯¦æƒ…
                </Button>
              ]}
            >
              <Card.Meta
                title={service.title}
                description={
                  <div>
                    <p className="text-gray-600 mb-2 line-clamp-2">{service.description}</p>
                    <div className="flex justify-between items-center">
                      <span className="text-lg font-bold text-green-600">
                        {formatPrice(service.price)}
                      </span>
                      <span className="text-sm text-gray-500">
                        {service.duration_hours}å°æ—¶
                      </span>
                    </div>
                    <div className="flex justify-between items-center mt-2">
                      <span className="text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">
                        {service.category}
                      </span>
                      <span className="text-sm text-gray-500">
                        â­ {service.rating?.toFixed(1) || 'æš‚æ— è¯„åˆ†'} ({service.total_orders}å•)
                      </span>
                    </div>
                  </div>
                }
              />
            </Card>
          </Col>
        ))}
      </Row>

      {/* åˆ†é¡µ */}
      <div className="text-center mt-6">
        <Pagination
          current={filters.page}
          total={total}
          pageSize={filters.limit}
          onChange={(page) => setFilters(prev => ({ ...prev, page }))}
          showSizeChanger
          showQuickJumper
          showTotal={(total, range) => `ç¬¬ ${range[0]}-${range[1]} æ¡ï¼Œå…± ${total} æ¡`}
        />
      </div>
    </div>
  );
};

export default ServiceSearch;
```

## ğŸ“± æ ¸å¿ƒåŠŸèƒ½å®ç°æŒ‡å—

### 1. è·¯ç”±ä¿æŠ¤ä¸­é—´ä»¶ (Next.js)

```typescript
// middleware.ts
import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';

// éœ€è¦è®¤è¯çš„è·¯ç”±
const protectedRoutes = ['/dashboard', '/mentors', '/students', '/services/create'];

// å…¬å¼€è·¯ç”±
const publicRoutes = ['/login', '/register', '/'];

export function middleware(request: NextRequest) {
  const token = request.cookies.get('access_token')?.value;
  const { pathname } = request.nextUrl;

  // æ£€æŸ¥æ˜¯å¦éœ€è¦è®¤è¯
  const isProtectedRoute = protectedRoutes.some(route => pathname.startsWith(route));
  const isPublicRoute = publicRoutes.includes(pathname);

  if (isProtectedRoute && !token) {
    // é‡å®šå‘åˆ°ç™»å½•é¡µ
    return NextResponse.redirect(new URL('/login', request.url));
  }

  if (isPublicRoute && token) {
    // å·²ç™»å½•ç”¨æˆ·è®¿é—®ç™»å½•é¡µï¼Œé‡å®šå‘åˆ°æ§åˆ¶å°
    return NextResponse.redirect(new URL('/dashboard', request.url));
  }

  return NextResponse.next();
}

export const config = {
  matcher: ['/((?!api|_next/static|_next/image|favicon.ico).*)'],
};
```

### 2. çŠ¶æ€ç®¡ç† (Zustand)

```typescript
// lib/store/auth.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface User {
  id: number;
  username: string;
  email?: string;
  role: string;
}

interface AuthState {
  user: User | null;
  token: string | null;
  isAuthenticated: boolean;
  setAuth: (user: User, token: string) => void;
  clearAuth: () => void;
}

export const useAuthStore = create<AuthState>()(
  persist(
    (set) => ({
      user: null,
      token: null,
      isAuthenticated: false,
      setAuth: (user, token) => set({ user, token, isAuthenticated: true }),
      clearAuth: () => set({ user: null, token: null, isAuthenticated: false }),
    }),
    {
      name: 'auth-storage',
    }
  )
);
```

### 3. è¡¨å•éªŒè¯å·¥å…·

```typescript
// lib/utils/validators.ts
export const validateUsername = (username: string): string | null => {
  if (!username) return 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º';
  if (username.length < 3) return 'ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦';
  if (username.length > 50) return 'ç”¨æˆ·åä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦';
  return null;
};

export const validatePassword = (password: string): string | null => {
  if (!password) return 'å¯†ç ä¸èƒ½ä¸ºç©º';
  if (password.length < 6) return 'å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦';
  return null;
};

export const validateEmail = (email: string): string | null => {
  if (!email) return null; // email is optional
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) return 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®';
  return null;
};

export const validatePrice = (price: number): string | null => {
  if (price < 0) return 'ä»·æ ¼ä¸èƒ½ä¸ºè´Ÿæ•°';
  if (price > 999999) return 'ä»·æ ¼è¿‡é«˜';
  return null;
};
```

## ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜åŒ–å»ºè®®

### 1. åŠ è½½çŠ¶æ€å¤„ç†

```tsx
// components/ui/LoadingSpinner.tsx
import React from 'react';
import { Spin } from 'antd';

interface LoadingSpinnerProps {
  size?: 'small' | 'default' | 'large';
  tip?: string;
}

const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ size = 'default', tip = 'åŠ è½½ä¸­...' }) => {
  return (
    <div className="flex justify-center items-center min-h-[200px]">
      <Spin size={size} tip={tip} />
    </div>
  );
};

export default LoadingSpinner;
```

### 2. é”™è¯¯è¾¹ç•Œå¤„ç†

```tsx
// components/ErrorBoundary.tsx
import React, { Component, ErrorInfo, ReactNode } from 'react';
import { Result, Button } from 'antd';

interface Props {
  children: ReactNode;
}

interface State {
  hasError: boolean;
  error?: Error;
}

class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Error caught by boundary:', error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return (
        <Result
          status="500"
          title="500"
          subTitle="æŠ±æ­‰ï¼Œé¡µé¢å‡ºç°äº†é”™è¯¯"
          extra={
            <Button type="primary" onClick={() => window.location.reload()}>
              åˆ·æ–°é¡µé¢
            </Button>
          }
        />
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;
```

### 3. å“åº”å¼è®¾è®¡

```css
/* styles/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* è‡ªå®šä¹‰å“åº”å¼æ–­ç‚¹ */
@layer utilities {
  .container-custom {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }
  
  .card-hover {
    @apply transform transition-all duration-200 hover:scale-105 hover:shadow-lg;
  }
  
  .gradient-bg {
    @apply bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500;
  }
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 768px) {
  .mobile-stack > * + * {
    margin-top: 1rem;
  }
  
  .mobile-full-width {
    width: 100% !important;
  }
}
```

## ğŸš€ éƒ¨ç½²å’Œå¼€å‘ç¯å¢ƒé…ç½®

### 1. ç¯å¢ƒå˜é‡é…ç½®

```env
# .env.local (Next.js) æˆ– .env (React)
NEXT_PUBLIC_API_BASE_URL=http://localhost:8001
NEXT_PUBLIC_WS_URL=ws://localhost:8001
NEXT_PUBLIC_APP_NAME=å¯èˆªå¼•è·¯äºº
NEXT_PUBLIC_APP_VERSION=1.0.0

# ç”Ÿäº§ç¯å¢ƒ
NEXT_PUBLIC_API_BASE_URL=https://api.peerpotal.com
NEXT_PUBLIC_WS_URL=wss://api.peerpotal.com
```

### 2. Docker é…ç½® (å¯é€‰)

```dockerfile
# Dockerfile
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

FROM node:18-alpine AS runner
WORKDIR /app

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs
EXPOSE 3000
ENV PORT 3000
ENV NODE_ENV production

CMD ["node", "server.js"]
```

### 3. æ„å»ºè„šæœ¬é…ç½®

```json
{
  "name": "peerpotal-frontend",
  "version": "1.0.0",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "type-check": "tsc --noEmit",
    "test": "jest",
    "test:watch": "jest --watch"
  },
  "dependencies": {
    "next": "^13.0.0",
    "react": "^18.0.0",
    "react-dom": "^18.0.0",
    "antd": "^5.0.0",
    "axios": "^1.4.0",
    "zustand": "^4.3.0",
    "@ant-design/icons": "^5.0.0",
    "tailwindcss": "^3.3.0"
  },
  "devDependencies": {
    "@types/react": "^18.0.0",
    "@types/node": "^18.0.0",
    "typescript": "^5.0.0",
    "eslint": "^8.0.0",
    "eslint-config-next": "^13.0.0"
  }
}
```

## ğŸ”§ å¼€å‘è°ƒè¯•å·¥å…·

### 1. API è°ƒè¯•åŠ©æ‰‹

```typescript
// lib/utils/apiDebugger.ts
export const apiDebugger = {
  log: (method: string, url: string, data?: any) => {
    if (process.env.NODE_ENV === 'development') {
      console.group(`ğŸ” API ${method.toUpperCase()}: ${url}`);
      if (data) console.log('ğŸ“¤ Request Data:', data);
      console.groupEnd();
    }
  },
  
  logResponse: (method: string, url: string, response: any) => {
    if (process.env.NODE_ENV === 'development') {
      console.group(`âœ… API ${method.toUpperCase()}: ${url}`);
      console.log('ğŸ“¥ Response:', response);
      console.groupEnd();
    }
  },
  
  logError: (method: string, url: string, error: any) => {
    if (process.env.NODE_ENV === 'development') {
      console.group(`âŒ API ${method.toUpperCase()}: ${url}`);
      console.error('ğŸ’¥ Error:', error);
      console.groupEnd();
    }
  }
};
```

### 2. å¼€å‘ç¯å¢ƒä¸“ç”¨ç»„ä»¶

```tsx
// components/dev/ApiTester.tsx (ä»…å¼€å‘ç¯å¢ƒæ˜¾ç¤º)
import React, { useState } from 'react';
import { Button, Input, Select, message } from 'antd';
import { apiClient } from '../../lib/api/client';

const ApiTester: React.FC = () => {
  const [method, setMethod] = useState('GET');
  const [url, setUrl] = useState('/api/v1/users/me');
  const [body, setBody] = useState('{}');
  const [response, setResponse] = useState('');

  const testApi = async () => {
    try {
      const config: any = { method: method.toLowerCase(), url };
      if (method !== 'GET' && body) {
        config.data = JSON.parse(body);
      }
      
      const result = await apiClient(config);
      setResponse(JSON.stringify(result.data, null, 2));
      message.success('API è°ƒç”¨æˆåŠŸ');
    } catch (error: any) {
      setResponse(JSON.stringify(error.response?.data || error.message, null, 2));
      message.error('API è°ƒç”¨å¤±è´¥');
    }
  };

  if (process.env.NODE_ENV !== 'development') {
    return null;
  }

  return (
    <div className="fixed bottom-4 right-4 w-96 bg-white border rounded-lg shadow-lg p-4 z-50">
      <h3 className="font-bold mb-2">ğŸ”§ API æµ‹è¯•å·¥å…·</h3>
      <div className="space-y-2">
        <Select value={method} onChange={setMethod} style={{ width: '100%' }}>
          <Select.Option value="GET">GET</Select.Option>
          <Select.Option value="POST">POST</Select.Option>
          <Select.Option value="PUT">PUT</Select.Option>
          <Select.Option value="DELETE">DELETE</Select.Option>
        </Select>
        <Input value={url} onChange={(e) => setUrl(e.target.value)} placeholder="API è·¯å¾„" />
        <Input.TextArea 
          value={body} 
          onChange={(e) => setBody(e.target.value)} 
          placeholder="è¯·æ±‚ä½“ (JSON)" 
          rows={3}
        />
        <Button type="primary" onClick={testApi} block>æµ‹è¯• API</Button>
        <Input.TextArea 
          value={response} 
          placeholder="å“åº”ç»“æœ" 
          rows={8} 
          readOnly
        />
      </div>
    </div>
  );
};

export default ApiTester;
```

## ğŸ“š æœ€ä½³å®è·µæŒ‡å—

### 1. ä»£ç ç»„ç»‡è§„èŒƒ

```typescript
// ç»„ä»¶æ–‡ä»¶ç»“æ„è§„èŒƒ
/**
 * ComponentName.tsx æ–‡ä»¶ç»“æ„ï¼š
 * 1. å¯¼å…¥è¯­å¥ (å¤–éƒ¨åº“ -> å†…éƒ¨æ¨¡å— -> ç±»å‹)
 * 2. ç±»å‹å®šä¹‰
 * 3. å¸¸é‡å®šä¹‰
 * 4. ä¸»ç»„ä»¶
 * 5. å­ç»„ä»¶ (å¦‚æœ‰)
 * 6. é»˜è®¤å¯¼å‡º
 */

// âœ… å¥½çš„ä¾‹å­
import React, { useState, useEffect } from 'react';
import { Button, Form, Input } from 'antd';
import { useAuth } from '../hooks/useAuth';
import { apiClient } from '../lib/api/client';
import type { User } from '../types/user';

interface ProfileFormProps {
  user: User;
  onSuccess: () => void;
}

const ProfileForm: React.FC<ProfileFormProps> = ({ user, onSuccess }) => {
  // ç»„ä»¶é€»è¾‘
};

export default ProfileForm;
```

### 2. é”™è¯¯å¤„ç†ç­–ç•¥

```typescript
// lib/utils/errorHandler.ts
export const handleApiError = (error: any, context?: string) => {
  console.error(`Error in ${context}:`, error);
  
  if (error.response) {
    // æœåŠ¡å™¨å“åº”é”™è¯¯
    const status = error.response.status;
    const message = error.response.data?.detail || 'æœåŠ¡å™¨é”™è¯¯';
    
    switch (status) {
      case 400:
        return 'è¯·æ±‚å‚æ•°é”™è¯¯';
      case 401:
        return 'ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•';
      case 403:
        return 'æƒé™ä¸è¶³';
      case 404:
        return 'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨';
      case 500:
        return 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯';
      default:
        return message;
    }
  } else if (error.request) {
    // ç½‘ç»œé”™è¯¯
    return 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®';
  } else {
    // å…¶ä»–é”™è¯¯
    return error.message || 'æœªçŸ¥é”™è¯¯';
  }
};
```

### 3. æ€§èƒ½ä¼˜åŒ–æŠ€å·§

```tsx
// ä½¿ç”¨ React.memo ä¼˜åŒ–ç»„ä»¶æ¸²æŸ“
import React, { memo } from 'react';

interface ServiceCardProps {
  service: Service;
  onClick: (id: number) => void;
}

const ServiceCard = memo<ServiceCardProps>(({ service, onClick }) => {
  return (
    <div onClick={() => onClick(service.id)}>
      {/* æœåŠ¡å¡ç‰‡å†…å®¹ */}
    </div>
  );
});

// ä½¿ç”¨ useMemo ä¼˜åŒ–è®¡ç®—
const ServiceList: React.FC<{ services: Service[] }> = ({ services }) => {
  const sortedServices = useMemo(() => {
    return services.sort((a, b) => b.rating - a.rating);
  }, [services]);

  return (
    <div>
      {sortedServices.map(service => (
        <ServiceCard key={service.id} service={service} onClick={handleClick} />
      ))}
    </div>
  );
};
```

## ğŸ¯ åŠŸèƒ½å¼€å‘ä¼˜å…ˆçº§

### é˜¶æ®µ 1ï¼šæ ¸å¿ƒåŠŸèƒ½ (1-2å‘¨)
1. âœ… **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** - æ³¨å†Œã€ç™»å½•ã€ç™»å‡º
2. âœ… **åŸºç¡€é¡µé¢å¸ƒå±€** - å¯¼èˆªã€ä¾§è¾¹æ ã€é¡µè„š
3. âœ… **ç”¨æˆ·èµ„æ–™ç®¡ç†** - æŸ¥çœ‹å’Œç¼–è¾‘ä¸ªäººä¿¡æ¯

### é˜¶æ®µ 2ï¼šæ ¸å¿ƒä¸šåŠ¡ (2-3å‘¨)
1. ğŸ¯ **å¯¼å¸ˆæ¨¡å—** - åˆ›å»ºå¯¼å¸ˆèµ„æ–™ã€å±•ç¤ºå¯¼å¸ˆä¿¡æ¯
2. ğŸ¯ **å­¦ç”Ÿæ¨¡å—** - å‘å¸ƒå­¦ä¹ éœ€æ±‚ã€æµè§ˆéœ€æ±‚
3. ğŸ¯ **æœåŠ¡æ¨¡å—** - å‘å¸ƒæœåŠ¡ã€æµè§ˆæœåŠ¡ã€æœåŠ¡è¯¦æƒ…

### é˜¶æ®µ 3ï¼šé«˜çº§åŠŸèƒ½ (2-3å‘¨)
1. ğŸ”„ **æ™ºèƒ½åŒ¹é…** - æ¨èç®—æ³•ã€åŒ¹é…åˆ—è¡¨
2. ğŸ’¬ **æ¶ˆæ¯ç³»ç»Ÿ** - å®æ—¶èŠå¤©ã€æ¶ˆæ¯é€šçŸ¥
3. ğŸ“… **ä¼šè¯ç®¡ç†** - é¢„çº¦ã€ä¼šè¯è®°å½•

### é˜¶æ®µ 4ï¼šå®Œå–„ä½“éªŒ (1-2å‘¨)
1. â­ **è¯„ä»·ç³»ç»Ÿ** - æœåŠ¡è¯„ä»·ã€ä¿¡èª‰ç§¯ç´¯
2. ğŸ“Š **æ•°æ®ç»Ÿè®¡** - ä¸ªäººæ§åˆ¶å°ã€æ•°æ®å¯è§†åŒ–
3. ğŸ”” **é€šçŸ¥ç³»ç»Ÿ** - é‚®ä»¶é€šçŸ¥ã€ç«™å†…é€šçŸ¥

## ğŸ¤ å‰åç«¯åä½œå»ºè®®

### 1. API å¯¹æ¥æµç¨‹
1. **ç¡®è®¤ API è§„èŒƒ** - æŸ¥çœ‹ Swagger æ–‡æ¡£ (`http://localhost:8001/docs`)
2. **æµ‹è¯• API æ¥å£** - ä½¿ç”¨ Postman æˆ–å†…ç½®è°ƒè¯•å·¥å…·
3. **å¤„ç†é”™è¯¯åœºæ™¯** - ç¡®ä¿æ‰€æœ‰é”™è¯¯çŠ¶æ€éƒ½æœ‰é€‚å½“å¤„ç†
4. **æ•°æ®æ ¼å¼éªŒè¯** - ç¡®ä¿å‰åç«¯æ•°æ®æ ¼å¼ä¸€è‡´

### 2. æ²Ÿé€šåä½œ
- **API å˜æ›´é€šçŸ¥** - åç«¯ API æœ‰å˜æ›´æ—¶åŠæ—¶é€šçŸ¥å‰ç«¯
- **é”™è¯¯æ—¥å¿—å…±äº«** - å‰ç«¯é”™è¯¯æ—¥å¿—å¸®åŠ©åç«¯å®šä½é—®é¢˜
- **åŠŸèƒ½æµ‹è¯•åä½œ** - å‰åç«¯è”åˆæµ‹è¯•å®Œæ•´åŠŸèƒ½æµç¨‹

### 3. æ•°æ®æ ¼å¼çº¦å®š
```typescript
// ç»Ÿä¸€çš„å“åº”æ ¼å¼
interface ApiResponse<T> {
  data: T;
  message?: string;
  status: 'success' | 'error';
}

// åˆ†é¡µæ•°æ®æ ¼å¼
interface PaginatedResponse<T> {
  items: T[];
  total: number;
  page: number;
  limit: number;
}
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### ğŸ”— ç›¸å…³é“¾æ¥
- **åç«¯ API æ–‡æ¡£**: `http://localhost:8001/docs`
- **é¡¹ç›®ä»“åº“**: `https://github.com/PeerPortal/backend`
- **æŠ€æœ¯æ ˆæ–‡æ¡£**: æŸ¥çœ‹ `docs/` ç›®å½•ä¸‹çš„ç›¸å…³æ–‡æ¡£

### ğŸ“§ è”ç³»æ–¹å¼
- **æŠ€æœ¯é—®é¢˜**: åˆ›å»º GitHub Issue
- **ç´§æ€¥é—®é¢˜**: è”ç³»åç«¯å¼€å‘å›¢é˜Ÿ
- **åŠŸèƒ½å»ºè®®**: é€šè¿‡é¡¹ç›®ç®¡ç†å·¥å…·æäº¤

### ğŸ› å¸¸è§é—®é¢˜è§£å†³
1. **CORS é”™è¯¯** - ç¡®è®¤åç«¯å·²é…ç½® `http://localhost:3000`
2. **è®¤è¯å¤±è´¥** - æ£€æŸ¥ Token æ ¼å¼å’Œè¿‡æœŸæ—¶é—´
3. **API è°ƒç”¨å¤±è´¥** - æŸ¥çœ‹ç½‘ç»œè¯·æ±‚å’Œå“åº”çŠ¶æ€ç 
4. **æ•°æ®æ ¼å¼é”™è¯¯** - å¯¹æ¯” API æ–‡æ¡£ä¸­çš„æ•°æ®ç»“æ„

### ğŸš¨ é”™è¯¯ä¿®å¤æŒ‡å—

æ ¹æ®æ‚¨æåˆ°çš„é”™è¯¯ä¿¡æ¯ï¼Œä»¥ä¸‹æ˜¯é’ˆå¯¹æ€§çš„ä¿®å¤å»ºè®®ï¼š

#### 1. å­¦ç”Ÿèµ„æ–™åˆ›å»ºå¤±è´¥ (500 - "åˆ›å»ºç”³è¯·è€…èµ„æ–™å¤±è´¥")
```typescript
// ç¡®ä¿è¯·æ±‚æ•°æ®æ ¼å¼æ­£ç¡®
const createStudentData = {
  urgency_level: 3,        // å¿…å¡«ï¼Œ1-5ä¹‹é—´çš„æ•´æ•°
  budget_min: 100.0,       // å¯é€‰ï¼Œæ•°å­—ç±»å‹
  budget_max: 300.0,       // å¯é€‰ï¼Œæ•°å­—ç±»å‹  
  description: "è¯¦ç»†çš„å­¦ä¹ éœ€æ±‚æè¿°",  // å¿…å¡«ï¼Œå­—ç¬¦ä¸²
  learning_goals: "æ˜ç¡®çš„å­¦ä¹ ç›®æ ‡",   // å¿…å¡«ï¼Œå­—ç¬¦ä¸²
  preferred_format: "online"          // å¯é€‰ï¼Œé»˜è®¤"online"
};

// API è°ƒç”¨ç¤ºä¾‹
try {
  const response = await apiClient.post('/api/v1/students/', createStudentData);
  console.log('å­¦ç”Ÿèµ„æ–™åˆ›å»ºæˆåŠŸ:', response.data);
} catch (error) {
  console.error('åˆ›å»ºå¤±è´¥:', error.response?.data);
  // æ£€æŸ¥å…·ä½“é”™è¯¯ä¿¡æ¯å¹¶ç›¸åº”å¤„ç†
}
```

#### 2. å¯¼å¸ˆèµ„æ–™åˆ›å»ºå¤±è´¥ (500 - "åˆ›å»ºæŒ‡å¯¼è€…èµ„æ–™å¤±è´¥")
```typescript
// ç¡®ä¿è¯·æ±‚æ•°æ®æ ¼å¼æ­£ç¡®
const createMentorData = {
  title: "ç•™å­¦ç”³è¯·æŒ‡å¯¼",                    // å¿…å¡«ï¼Œå­—ç¬¦ä¸²
  description: "æä¾›ä¸“ä¸šçš„ç•™å­¦ç”³è¯·æŒ‡å¯¼æœåŠ¡",   // å¯é€‰ï¼Œå­—ç¬¦ä¸²
  learning_goals: "å¸®åŠ©å­¦å¼Ÿå­¦å¦¹æˆåŠŸç”³è¯·",    // å¯é€‰ï¼Œå­—ç¬¦ä¸²
  hourly_rate: 200.0,                      // å¯é€‰ï¼Œæ•°å­—ç±»å‹
  session_duration_minutes: 60             // å¯é€‰ï¼Œé»˜è®¤60åˆ†é’Ÿ
};

// API è°ƒç”¨ç¤ºä¾‹
try {
  const response = await apiClient.post('/api/v1/mentors/', createMentorData);
  console.log('å¯¼å¸ˆèµ„æ–™åˆ›å»ºæˆåŠŸ:', response.data);
} catch (error) {
  console.error('åˆ›å»ºå¤±è´¥:', error.response?.data);
}
```

#### 3. æœåŠ¡åˆ›å»ºå¤±è´¥ (400 - "åˆ›å»ºæœåŠ¡å¤±è´¥")
```typescript
// ç¡®ä¿è¯·æ±‚æ•°æ®æ ¼å¼æ­£ç¡®
const createServiceData = {
  title: "ä¸€å¯¹ä¸€ç•™å­¦ç”³è¯·æŒ‡å¯¼",              // å¿…å¡«ï¼Œå­—ç¬¦ä¸²
  description: "æä¾›ä¸ªæ€§åŒ–çš„ç•™å­¦ç”³è¯·æŒ‡å¯¼",   // å¿…å¡«ï¼Œå­—ç¬¦ä¸²
  category: "ç•™å­¦æŒ‡å¯¼",                    // å¿…å¡«ï¼Œå­—ç¬¦ä¸²
  price: 29900,  // æ³¨æ„ï¼šä»·æ ¼å¿…é¡»ä¸ºæ•´æ•°ï¼ˆåˆ†ï¼‰ï¼Œä¾‹å¦‚299å…ƒ = 29900åˆ†
  duration_hours: 2                        // å¿…å¡«ï¼Œæ•´æ•°
};

// API è°ƒç”¨ç¤ºä¾‹
try {
  const response = await apiClient.post('/api/v1/services/', createServiceData);
  console.log('æœåŠ¡åˆ›å»ºæˆåŠŸ:', response.data);
} catch (error) {
  console.error('åˆ›å»ºå¤±è´¥:', error.response?.data);
}
```

#### ğŸ”§ è°ƒè¯•å»ºè®®
1. **æ£€æŸ¥è®¤è¯çŠ¶æ€** - ç¡®ä¿ç”¨æˆ·å·²ç™»å½•ä¸” token æœ‰æ•ˆ
2. **éªŒè¯æ•°æ®æ ¼å¼** - ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹è¯·æ±‚æ•°æ®
3. **æŸ¥çœ‹é”™è¯¯å“åº”** - æ£€æŸ¥ `error.response.data` ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
4. **ä½¿ç”¨ API æ–‡æ¡£** - è®¿é—® `http://localhost:8001/docs` ç¡®è®¤ API è§„èŒƒ

---

**å¼€å‘æ„‰å¿«ï¼** ğŸš€ æœ‰é—®é¢˜éšæ—¶æ²Ÿé€šï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ‰“é€ ä¼˜ç§€çš„ç•™å­¦æŒ‡å¯¼å¹³å°ï¼
